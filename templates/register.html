{% extends 'index.html' %}
{% block content %}
{% if success %}
<div class="p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400" role="alert">
  <span class="font-medium">Registered!</span> Please check your email for your new credentials.
</div>
{% elif success is none() %}
{% else %}
<div class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
  <svg class="flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
    <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
  </svg>
  <span class="sr-only">Whoops!</span>
  <div>
        <span class="font-medium">Please adjust the following fields:</span>
        <ul class="mt-1.5 list-disc list-inside">
            {% for item in bad_items %}
                <li>{{ item }}</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endif %}
<div class="rounded-lg shadow-md overflow-hidden px-8 py-5">
    <form class="max-w-sm mx-auto" action="/" method="post">
        {% for id, field in form.items() %}
            {% if field.required %}
            <div class="mb-5" hx-swap="innerHTML" hx-target="this">
                    <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" for="{{ id }}">{{ field.display_as }}</label>
                    <input
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                        hx-trigger="blur"
                        hx-sync="closest form:abort"
                        type="{{ field.type }}"
                        name="{{ id }}"
                        id="{{ id }}"
                        placeholder="{{ field.placeholder }}"
                        hx-post="{{ field.validation_endpoint }}"
                        {% if field.user_input %}value="{{ field.user_input }}"{% endif %}
                        {% if field.on_input %}oninput="{{ field.on_input }}"{% endif %}
                        required
                    >
                </div>
            {% else %}
            <div class="mb-5 starts-hidden hidden" hx-swap="innerHTML" hx-target="this">
                    <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" for="{{ id }}">{{ field.display_as }}</label>
                    <input
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                        hx-trigger="blur"
                        hx-sync="closest form:abort"
                        type="{{ field.type }}"
                        name="{{ id }}"
                        id="{{ id }}"
                        placeholder="{{ field.placeholder }}"
                        hx-post="{{ field.validation_endpoint }}"
                        {% if field.user_input %}value="{{ field.user_input }}"{% endif %}
                        {% if field.on_input %}oninput="{{ field.on_input }}"{% endif %}
                    >
                </div>
            {% endif %}
        {% endfor %}
        <div class="inline-flex rounded-md shadow-sm" role="group">
          <button type="submit" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
            Register
          </button>
          <button type="button" id="toggleOptionalFields" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
            Toggle optional fields
          </button>
          <button type="button" id="registrationHelpModal" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
            Help
          </button>
        </div>
        <button type="button" class="text-white bg-[#050708] hover:bg-[#050708]/90 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#050708]/50 dark:hover:bg-[#050708]/30 me-2 mb-2">
        <svg class="w-5 h-5 me-2 -ms-1" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="apple" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"></path></svg>
        Sign in with Apple
        </button>
    </form>
</div>
{% endblock %}
